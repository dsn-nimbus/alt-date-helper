!function(e){"use strict";e.module("alt.date-helper",[]).directive("altDateHelper",function(){var e="A",t="ngModel",n=function(e,t,n,l){function r(){var e=l.$viewValue;e=s(e),e=a(e),l.$setViewValue(e),l.$render(),u(t[0])}function u(e){var t=[];t.push(_.substr(0,h)),t.push(_.substr(h,_.length));var n=[];if(n.push(e.value.substr(0,h)),n.push(e.value.substr(h,e.value.length)),h!=v){var l=v-h,r=_.substr(h,l).split("/").length-1,u=e.value.substr(h,e.value.length>v?v:e.value.length).split("/").length-1;u=r>0?u:0;var s=2-(e.value.split("/").length-1);return void(n[1].length<=t[1].length-l+u-s?e.setSelectionRange(h,h):e.setSelectionRange(h+1+u,h+1+u))}if(((3==h||2==h)&&e.value.length>=3||(6==h||5==h)&&e.value.length>=6)&&_.length==e.value.length)return void e.setSelectionRange(h,h);if(_.length>e.value.length)return t[0]!=n[0]&&h>0?void e.setSelectionRange(h-1,h-1):void e.setSelectionRange(h,h);var a=e.value.split("/").length-1-(_.split("/").length-1);return a=a>0?a:0,t[1].length+a<n[1].length?void e.setSelectionRange(h+1+a,h+1+a):void 0}function s(e){return e.replace(/[^0-9]/g,"")}function a(e){return e.length>g&&(e=e.substr(0,g)),e.length>4?8===g?e=e.substr(0,2)+"/"+e.substr(2,2)+"/"+e.substr(4,e.length-4):6===g&&(e=e.substr(0,2)+"/"+e.substr(2,e.length-2)):e.length>2&&(e=e.substr(0,2)+"/"+e.substr(2,e.length-2)),e}var i=n&&n.altDateHelper?n.altDateHelper:"__/__/____";"__/__/____"!==i&&"__/____"!==i&&(i="__/__/____");var g=i.replace(/([\/])/g,"").length;g=6!==g&&8!==g?8:g;var h=0,v=0,_="";t.on("keydown",function(e){h=this.selectionStart,v=this.selectionEnd,_=this.value}),t.on("input",r)};return{restrict:e,require:t,link:n}})}(angular);