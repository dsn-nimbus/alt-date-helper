!function(e){"use strict";e.module("alt.date-helper",[]).directive("altDateHelper",function(){var e="A",t="ngModel",n=function(e,t,n,l){function u(){var e=l.$viewValue;e=r(e),e=i(e),l.$setViewValue(e),l.$render(),s(t[0])}function s(e){var t=[];t.push(h.substr(0,a)),t.push(h.substr(a,h.length));var n=[];if(n.push(e.value.substr(0,a)),n.push(e.value.substr(a,e.value.length)),a!=g){var l=g-a,u=h.substr(a,l).split("/").length-1,s=e.value.substr(a,e.value.length>g?g:e.value.length).split("/").length-1;s=u>0?s:0;var r=2-(e.value.split("/").length-1);return void(n[1].length<=t[1].length-l+s-r?e.setSelectionRange(a,a):e.setSelectionRange(a+1+s,a+1+s))}if(((3==a||2==a)&&e.value.length>=3||(6==a||5==a)&&e.value.length>=6)&&h.length==e.value.length)return void e.setSelectionRange(a,a);if(h.length>e.value.length)return t[0]!=n[0]&&a>0?void e.setSelectionRange(a-1,a-1):void e.setSelectionRange(a,a);var i=e.value.split("/").length-1-(h.split("/").length-1);return i=i>0?i:0,t[1].length+i<n[1].length?void e.setSelectionRange(a+1+i,a+1+i):void 0}function r(e){return e.replace(/[^0-9]/g,"")}function i(e){return e.length>8&&(e=e.substr(0,8)),e.length>4?e=e.substr(0,2)+"/"+e.substr(2,2)+"/"+e.substr(4,e.length-4):e.length>2&&(e=e.substr(0,2)+"/"+e.substr(2,e.length-2)),e}var a=0,g=0,h="";t.on("keydown",function(e){a=this.selectionStart,g=this.selectionEnd,h=this.value}),t.on("input",u)};return{restrict:e,require:t,link:n}})}(angular);